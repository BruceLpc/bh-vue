!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.EmapGrid=e():t.EmapGrid=e()}(this,function(){return function(t){function e(n){if(o[n])return o[n].exports;var a=o[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}({0:function(t,e,o){t.exports=o(286)},28:function(t,e,o){t.exports={default:o(29),__esModule:!0}},29:function(t,e,o){var n=o(30),a=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return a.stringify.apply(a,arguments)}},30:function(t,e){var o=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=o)},261:function(t,e,o){var n,a,i={};n=o(262),a=o(263),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports.default);var r="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;a&&(r.template=a),r.computed||(r.computed={}),Object.keys(i).forEach(function(t){var e=i[t];r.computed[t]=function(){return e}})},262:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{options:Object},ready:function(){var t=this,e=$(t.$el);e.emapCard(t.options)},methods:{reload:function(t){$(this.$el).emapCard("reload",t)},reloadFirstPage:function(t){$(this.$el).emapCard("reloadFirstPage",t)},getTotalRecords:function(){return $(this.$el).emapCard("getTotalRecords")}}}},263:function(t,e){t.exports=" <div></div> "},264:function(t,e,o){var n,a,i={};n=o(265),a=o(266),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports.default);var r="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;a&&(r.template=a),r.computed||(r.computed={}),Object.keys(i).forEach(function(t){var e=i[t];r.computed[t]=function(){return e}})},265:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=o(28),i=n(a),r={height:null,checkable:!1,operations:null},s=function(t,e){return"button"===e.type?"<button data-name='"+e.name+"' data-row='"+t+"' class='opt-button'> style='padding: 0 5px;'"+e.title+"</button>":"<a href='javascript:void(0)' data-name='"+e.name+"' data-row='"+t+"' class='opt-button' style='padding: 0 5px;'>"+e.title+"</a>"},c=function(t){return{colIndex:"last",type:"tpl",column:{width:t.options.operations.width,text:t.options.operations.title,align:"center",cellsAlign:"center",cellsRenderer:function(e,o,n,a){var i=t.options.operations.items;$.isFunction(i)&&(i=i.call(t,a));var r="";return $.each(i,function(t,o){r+=s(e,o)}),r}}}},d=function(t){var e=t.hiddenColumns,o=$(t.$el);e&&e.length>0&&e.forEach(function(t){o.jqxDataTable("hideColumn",t)})},p=function(t){if(!t.inited){var e=$(t.$el),o=$.extend({customColumns:[]},r,t.options),n=o.customColumns,a=o.operations;t.hiddenColumns=o.hiddenColumns,o.hiddenColumns=void 0,o.checkable&&n.unshift({colIndex:0,showCheckAll:!0,width:32,type:"checkbox"}),a&&n.push(c(t));var s=["click","mouseover"];o.checkable=void 0,o.operations=void 0,o.lazyInit=void 0,e.off("rowExpand").on("rowExpand",function(){t.$dispatch("expand")}),e.off("rowCollapse").on("rowCollapse",function(){t.$dispatch("collapse")}),o.ready=function(){d(t),t.$dispatch(t.readyName,t)},o.rendered=function(){var o=e.jqxDataTable("getRows");o.forEach(function(e,o){t.cachedMap[o]=e}),Vue.nextTick(function(){e.find(".jqx-grid-table tr").each(function(e,o){s.forEach(function(n){var a=$(o).find("[data-"+n+"]");a.length>0&&a.prop("row",t.cachedMap[e])})})})},o.formatData=function(t){return t?(delete t.pagesize,delete t.pagenum,delete t.filterslength,delete t.sortdatafield,delete t.sortorder,(0,i.default)(t)):{}},e.emapdatatable(o),e.on("click",".opt-button",function(e){var o=$(this),n=o.attr("data-row"),a=o.attr("data-name");t.$dispatch(a,t.cachedMap[n]||t.getDataByRow(n))}),s.forEach(function(o){e.on("click","[data-"+o+"]",function(e){var n=$(this),a=n.prop("row"),i=n.attr("data-"+o);t.$dispatch(i,a)})}),t.inited=!0}},u=function(t){return t&&t.datas&&t.datas.rows};e.default={data:function(){return{inited:!1,readyName:"ready",cachedMap:{},hiddenColumns:[]}},props:{options:Object},ready:function(){this.options.readyName&&(this.readyName=this.options.readyName,this.options.readyName=void 0),this.options.lazyInit||p(this)},methods:{init:function(){p(this)},reload:function(t,e){var o=this;$(this.$el).emapdatatable("reload",t,function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];d(o),e&&e(n)})},checkedRecords:function(){return $(this.$el).emapdatatable("checkedRecords")},reloadFirstPage:function(t,e){var o=this;return $(this.$el).emapdatatable("reloadFirstPage",t,function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];d(o),e&&e(n)})},getTotalRecords:function(){return $(this.$el).emapdatatable("getTotalRecords")},getModel:function(){return $(this.$el).emapdatatable("getModel")},getResult:function(){return $(this.$el).emapdatatable("getResult")},getDataByRow:function(t){var e=this.options.getRows||u,o=this.getResult(),n=e(o);return n&&n[t]},selectColumnsExport:function(t){var e=$.extend({type:"export"},t);return $(this.$el).emapdatatable("selectColumnsExport",e)},selectToShowColumns:function(t){return $(this.$el).emapdatatable("selectToShowColumns",t)},export:function(t){return $(this.$el).emapdatatable("export",t)}},beforeDestroy:function(){this.inited=!1,this.cachedMap={}}}},266:function(t,e){t.exports=" <div></div> "},286:function(t,e,o){var n,a,i={};n=o(287),a=o(288),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports.default);var r="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;a&&(r.template=a),r.computed||(r.computed={}),Object.keys(i).forEach(function(t){var e=i[t];r.computed[t]=function(){return e}})},287:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=o(264),i=n(a),r=o(261),s=n(r),c={list:"EmapDatatable",card:"EmapCard"},d={pageSize:[10,12]},p=function(t,e){var o=$.extend({},d,e);switch(t){case"list":return o.pageSize=o.pageSize[0],o.template=void 0,o.cardBeforeRender=void 0,o.cardAfterRender=void 0,o;case"card":return o.pageSize=o.pageSize[1],e}},u=function(t,e){t.$dispatch("grid:switch",e)};e.default={props:{columnSetting:{default:!0,type:Boolean},type:{default:"list"},options:{default:function(){return{}},type:Object}},computed:{compName:function(){return c[this.type]},compOpts:function(){return p(this.type,this.options)}},methods:{reload:function(t){this.$refs.grid.reload(t)},reloadFirstPage:function(t){this.$refs.grid.reloadFirstPage(t)},getTotalRecords:function(){return this.$refs.grid.getTotalRecords()},showList:function(){this.type="list",u(this,"list")},showCard:function(){this.type="card",u(this,"card")},openSetting:function(){var t=this.$refs.grid;t.selectToShowColumns&&t.selectToShowColumns()},getGrid:function(){return this.$refs.grid}},components:{EmapDatatable:i.default,EmapCard:s.default}}},288:function(t,e){t.exports=' <div class=bh-grid-container> <div class=bh-switch-card-view> <span v-if=\'columnSetting && type=="list"\' class="bh-switch-item bh-switch-setting bh-mr-8" @click=openSetting> <i class="iconfont icon-settings"></i> <span>设置</span> </span> <span class="bh-switch-item bh-switch-list" :class=\'{"bh-active": type == "list"}\' @click=showList> <i class="iconfont icon-viewlist"></i> <span>列表</span> </span> <span class="bh-switch-item bh-switch-card" :class=\'{"bh-active": type == "card"}\' @click=showCard> <i class="iconfont icon-viewmodule"></i> <span>卡片</span> </span> </div> <div> <component v-ref:grid :is=compName :options=compOpts keep-alive></component> </div> </div> '}})});