!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.BhChoose=t():e.BhChoose=t()}(this,function(){return function(e){function t(o){if(r[o])return r[o].exports;var n=r[o]={exports:{},id:o,loaded:!1};return e[o].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){e.exports=r(22)},,,,function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t];r[2]?e.push("@media "+r[2]+"{"+r[1]+"}"):e.push(r[1])}return e.join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},n=0;n<this.length;n++){var a=this[n][0];"number"==typeof a&&(o[a]=!0)}for(n=0;n<t.length;n++){var i=t[n];"number"==typeof i[0]&&o[i[0]]||(r&&!i[2]?i[2]=r:r&&(i[2]="("+i[2]+") and ("+r+")"),e.push(i))}},e}},function(e,t,r){function o(e,t){for(var r=0;r<e.length;r++){var o=e[r],n=u[o.id];if(n){n.refs++;for(var a=0;a<n.parts.length;a++)n.parts[a](o.parts[a]);for(;a<o.parts.length;a++)n.parts.push(s(o.parts[a],t))}else{for(var i=[],a=0;a<o.parts.length;a++)i.push(s(o.parts[a],t));u[o.id]={id:o.id,refs:1,parts:i}}}}function n(e){for(var t=[],r={},o=0;o<e.length;o++){var n=e[o],a=n[0],i=n[1],l=n[2],s=n[3],c={css:i,media:l,sourceMap:s};r[a]?r[a].parts.push(c):t.push(r[a]={id:a,parts:[c]})}return t}function a(e,t){var r=p(),o=v[v.length-1];if("top"===e.insertAt)o?o.nextSibling?r.insertBefore(t,o.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),v.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(t)}}function i(e){e.parentNode.removeChild(e);var t=v.indexOf(e);t>=0&&v.splice(t,1)}function l(e){var t=document.createElement("style");return t.type="text/css",a(e,t),t}function s(e,t){var r,o,n;if(t.singleton){var a=g++;r=b||(b=l(t)),o=c.bind(null,r,a,!1),n=c.bind(null,r,a,!0)}else r=l(t),o=d.bind(null,r),n=function(){i(r)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else n()}}function c(e,t,r,o){var n=r?"":o.css;if(e.styleSheet)e.styleSheet.cssText=x(t,n);else{var a=document.createTextNode(n),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}function d(e,t){var r=t.css,o=t.media,n=t.sourceMap;if(o&&e.setAttribute("media",o),n&&(r+="\n/*# sourceURL="+n.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var u={},h=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},f=h(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),p=h(function(){return document.head||document.getElementsByTagName("head")[0]}),b=null,g=0,v=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=f()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var r=n(e);return o(r,t),function(e){for(var a=[],i=0;i<r.length;i++){var l=r[i],s=u[l.id];s.refs--,a.push(s)}if(e){var c=n(e);o(c,t)}for(var i=0;i<a.length;i++){var s=a[i];if(0===s.refs){for(var d=0;d<s.parts.length;d++)s.parts[d]();delete u[s.id]}}}};var x=function(){var e=[];return function(t,r){return e[t]=r,e.filter(Boolean).join("\n")}}()},,,,,,,,,,,,,,,,,function(e,t,r){var o,n,a={};r(23),o=r(25),n=r(37),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports.default);var i="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;n&&(i.template=n),i.computed||(i.computed={}),Object.keys(a).forEach(function(e){var t=a[e];i.computed[e]=function(){return t}})},function(e,t,r){var o=r(24);"string"==typeof o&&(o=[[e.id,o,""]]);r(5)(o,{});o.locals&&(e.exports=o.locals)},function(e,t,r){t=e.exports=r(4)(),t.push([e.id,".bh-choose{width:100%;overflow:hidden;border:1px solid #d8dcf0}.bh-choose .side{padding:5px;display:inline-block}.bh-choose .side.left{border-right:none}.bh-choose .side.left .search-box{background:rgba(63,81,181,.04)}.bh-choose .side.left .search-box i,.bh-choose .side.left .search-box input{border:none}.bh-choose .side.right{background:rgba(63,81,181,.04);position:relative;border-left:1px solid #d8dcf0}.bh-choose .side.right .title{padding:4px 0;text-indent:5px;border-bottom:none}.bh-choose .side.right .before{border:44px solid transparent;border-left:14px solid #d8dcf0;position:absolute;top:128px;left:0}.bh-choose .side.right .after{border:44px solid transparent;border-left:14px solid #fff;position:absolute;top:128px;left:-1px}.bh-choose .side.right .right-list{overflow:auto}",""])},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(26),a=o(n),i=r(31),l=o(i);t.default={data:function(){return{checkedRows:[],searchVal:"",operations:{title:"操作",width:100,items:[{title:"删除",name:"del",type:"link"}]}}},computed:{queryParams:function(){var e=this.leftParams||{};return e[this.localSearchField]=this.searchVal,e},columns:function(){var e=this;return e.leftCols?e.leftCols:[{dataField:"onlineDate",cellsRenderer:function(t,r,o,n){if(!e.leftcellsRenderer)return console.error("no leftcellsRenderer defined for bhChoose !"),"";var a=$(e.leftcellsRenderer(t,r,o,n));return $(a.children()[0]).addClass("gm-member-user"),a.prop("outerHTML")}}]},rcolumns:function(){var e=this;return e.rightCols?e.rightCols:[{dataField:"onlineDate",cellsRenderer:function(t,r,o,n){if(!e.rightcellsRenderer)return console.error("no rightcellsRenderer defined for bhChoose !"),"";var a=$(e.rightcellsRenderer(t,r,o,n));return $(a.children()[0]).addClass("gm-member-user"),a.prop("outerHTML")}}]}},props:{id:{default:"id"},height:{default:313},leftWidth:{default:"50%"},rightWidth:{default:"50%"},localSearchField:{default:"keyword"},pageNumberField:{default:"pageNumber"},pageSizeField:{default:"pageSize"},placeholder:{default:"输入关键字"},rightTitle:{default:"已选择"},leftSourceUrl:String,leftSourceAction:String,leftCols:Array,rightSourceUrl:String,localdata:Array,rightSourceAction:String,rightCols:Array,leftParams:Object,rightParams:Object,type:{type:String,default:"post"},showHeader:{type:Boolean,default:!1},showSelectedTip:{type:Boolean,default:!0},leftcellsRenderer:Function,rightcellsRenderer:Function,nicescroll:{type:Boolean,default:!0},callbacks:Object},methods:{reload:function(e){"left"!==e&&this.$refs.bhchooserighttable.render(),"right"!==e&&this.$refs.bhchooselefttable.render()},onCheckChange:function(e,t){if(t){var r=this;e?r.$refs.bhchooserighttable.addRow(t):r.$refs.bhchooserighttable.deleteRowById(t[this.id]),this.$dispatch("change")}},leftListRendered:function(){var e=this;e.$dispatch("left-ready"),setTimeout(function(){e.$refs.bhchooselefttable.setChecked(e.$refs.bhchooserighttable.getTotalRecords(),e.id)},0)},rightListRendered:function(){this.nicescroll&&$(this.$el).find(".right-list").niceScroll()},search:function(){this.$refs.bhchooselefttable.render()},getChecked:function(){return this.$refs.bhchooserighttable.getTotalRecords()},checkById:function(e){return this.$refs.bhchooselefttable.checkById(e)},uncheck:function(e){this.uncheckById(e[this.id])},uncheckById:function(e){return this.$refs.bhchooselefttable.uncheckById(e)},addItem:function(e){return this.$refs.bhchooselefttable.addRow(e)},addAndCheck:function(e){this.addItem(e),this.$refs.bhchooselefttable.refresh(),this.checkById(e[this.id])}},components:{BhSearch:a.default,BhDatatable:l.default}}},function(e,t,r){var o,n,a={};r(27),o=r(29),n=r(30),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports.default);var i="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;n&&(i.template=n),i.computed||(i.computed={}),Object.keys(a).forEach(function(e){var t=a[e];i.computed[e]=function(){return t}})},function(e,t,r){var o=r(28);"string"==typeof o&&(o=[[e.id,o,""]]);r(5)(o,{});o.locals&&(e.exports=o.locals)},function(e,t,r){t=e.exports=r(4)(),t.push([e.id,"@icon-color: #999;.search-box[_v-78ff1161]{display:-webkit-box;display:-ms-flexbox;display:flex;position:relative}.search-box input[_v-78ff1161]{padding-left:33px;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;width:auto}.search-box .icon-search[_v-78ff1161]{left:0;position:absolute;padding:5px 6px;color:@icon-color}.search-box a[_v-78ff1161]{border:none;margin-left:-1px}",""])},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e?e.trim():""};t.default={data:function(){return{jqxObj:null}},props:{value:{type:String,default:""},showButton:{type:Boolean,default:!0},source:{default:function(){return[]}},placeholder:{default:"输入要搜索的关键字"},btnText:{default:"搜索"},maxlength:{type:Number,default:20},minlength:{type:Number,default:0}},methods:{getValue:function(){return r(this.value)},search:function(){this.$dispatch("search",r(this.value))}},ready:function(){var e=$(this.$el);this.jqxObj=e.jqxInput({source:this.source}),this.$nextTick(function(){e.find("input.jqx-input-group-addon").css("border-right-width","1px")})},beforeDestroy:function(){var e=$(this.$el);e.jqxInput("destroy")}}},function(e,t){e.exports=' <div class=search-box _v-78ff1161=""> <input type=text v-model=value class=bh-form-control @keyup.enter=search :maxlength=maxlength :minlength=minlength :placeholder=placeholder _v-78ff1161=""> <i class="iconfont icon-search" _v-78ff1161=""></i> <a v-if=showButton class="bh-btn bh-btn-primary bh-btn-small j-search-btn" href=javascript:void(0); @click=search _v-78ff1161="">{{btnText}}</a> </div> '},function(e,t,r){var o,n,a={};o=r(32),n=r(36),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports.default);var i="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;n&&(i.template=n),i.computed||(i.computed={}),Object.keys(a).forEach(function(e){var t=a[e];i.computed[e]=function(){return t}})},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(33),a=o(n),i=34,l=["id","width","height","showHeader","checkable","pageable","enableBrowserSelection","selectionMode","pagerMode","pageNumberField","pageSizeField","sortable","reorder","resize","url","contentType","localdata","root","columns","queryType","queryParams","operations","callbacks"],s=["id","checkable","pageNumberField","pageSizeField","reorder","resize","url","contentType","localdata","root","queryType","queryParams","operations","callbacks"],c=function(e){var t=e.options||{};return $.extend(t,l.reduce(function(r,o){return r[o]=void 0!==t[o]?t[o]:e[o],r},{}))},d=function(e){var t=e.opts,r=t.callbacks,o={dataType:"json",type:t.queryType,id:t.id};return t.url?(o.url=t.url,o.root=t.root):o.localdata=e.localdata||t.localdata||[],new $.jqx.dataAdapter(o,{contentType:t.contentType,formatData:function(e){return t.pageable&&(e[t.pageNumberField]=e.pagenum+1,e[t.pageSizeField]=e.pagesize),"pagenum"!==t.pageNumberField&&delete e.pagenum,"pagesize"!==t.pageSizeField&&delete e.pagesize,$.extend(e,t.queryParams),(0,a.default)(e)},beforeSend:function(e){r&&r.beforeSend&&r.beforeSend(e)},downloadComplete:function(e,t,n){r&&r.downloadComplete&&r.downloadComplete(e,t,o)},loadError:function(e,t,o){throw r&&r.loadError&&r.loadError(t,o),new Error("loadError:"+o.toString())}})},u=function(e){var t=$(e.$el),r=e.opts;return{text:"checkbox",dataField:"checkbox",width:i+"px",renderer:function(e,t,r){var o='<div class="selectAllCheckboxFlag bh-checkbox bh-mh-8"><label><input type="checkbox" value=""><i class="bh-choice-helper"></i></label>';return o},rendered:function(e,r,o){var n=this;return e.on("click","input",function(e){var r=t.find("table"),o=r.find("div.bh-checkbox"),a=$(n);a.hasClass("selectFlag")?(a.prop("checked",!1).removeClass("selectFlag"),o.each(function(){$(this).find("input").prop("checked",!1)})):(a.prop("checked",!0).addClass("selectFlag"),o.each(function(){$(this).find("input").prop("checked",!0)})),e.stopPropagation()}),!0},cellsRenderer:function(e,t,o,n){var a='<div class="bh-checkbox"><label><input type="checkbox" @checked value="" data-id="@dataId" data-row=@dataRow><i class="bh-choice-helper"></i></label>';return a=a.replace("@dataId",n[r.id]).replace("@dataRow",e),a=n.checkbox?a.replace("@checked","checked"):a.replace("@checked","")}}},h=function(e,t){if(!e.hasClass("selectAllCheckboxFlag")){var r=t.find("div.selectAllCheckboxFlag").find("input"),o=t.find("table"),n=o.find("div.bh-checkbox");if(e.prop("checked")){var a=!0;n.find("input").each(function(){$(this).prop("checked")||(a=!1)}),a?r.prop("checked",!0).addClass("selectFlag"):r.prop("checked",!1).removeClass("selectFlag")}else r.prop("checked",!1).removeClass("selectFlag")}},f=function(e,t){return"button"===t.type?"<button data-name='"+t.name+"' data-row='"+e+"' class='opt-button'> style='padding: 0 5px;'"+t.title+"</button>":"<a href='javascript:void(0)' data-name='"+t.name+"' data-row='"+e+"' class='opt-button' style='padding: 0 5px;'>"+t.title+"</a>"},p=function(e){var t=e.opts,r=t.operations,o=r.title;return{width:r.width,text:o,cellsAlign:"center",align:"center",columnType:"none",editable:!1,sortable:!1,dataField:null,cellsRenderer:function(e,t,o){var n=r.items,a="";return $.each(n,function(t,r){a+=f(e,r)}),a}}},b=function(e){return e.jqxDataTable("getSelection")},g=function(e){return e.jqxDataTable("getRows")},v=function(e){var t=e.opts;t.checkable&&$(e.$el).find("div.bh-checkbox input[data-id]").each(function(){var t=$(this);t[0].checked=$.inArray(t.attr("data-id"),e.checkedIds)>-1})},x=null;t.default={data:function(){return{checkedIds:[],opts:{}}},props:{id:{default:"id"},options:Object,width:{default:"100%"},height:{default:"auto"},showHeader:{default:!0,type:Boolean},checkable:{default:!1,type:Boolean},pageable:{default:!0,type:Boolean},pageNumberField:{default:"pageNumber"},pageSizeField:{default:"pageSize"},sortable:{default:!0,type:Boolean},reorder:{default:!1,type:Boolean},resize:{default:!1,type:Boolean},url:String,localdata:Array,root:String,columns:Array,contentType:{default:"application/json",type:String},queryType:{default:"GET",type:String},enableBrowserSelection:{default:!0},selectionMode:{default:"singleRow"},pagerMode:{type:String,default:"advanced"},queryParams:Object,selectedRows:Array,checkedRows:Array,operations:Object,callbacks:{type:Object,default:function(){return{}}}},methods:{render:function(){$(this.$el).jqxDataTable("render")},reload:function(){$(this.$el).jqxDataTable("source",d(this))},refresh:function(){$(this.$el).jqxDataTable("refresh")},getTotalRecords:function(){return $(this.$el).jqxDataTable("getRows")},getRowById:function(e){for(var t=this.opts,r=t.id,o=this.getTotalRecords(),n=0,a=o.length;n<a;n++)if(o[n][r]==e)return o[n];return null},getChecked:function(){return this.checkedRows},setChecked:function(e,t){this.checkedRows=$.extend(!0,[],e);var r=this.checkedIds=[];$.each(e,function(e,o){return r.push(o[t])}),v(this)},selectRow:function(e){var t=$(this.$el);t.jqxDataTable("selectRow",e)},addRow:function(e){$(this.$el).jqxDataTable("addRow",null,e)},deleteRowById:function(e){var t=this.opts,r=t.id,o=$(this.$el),n=g(o);$.each(n,function(t,n){if(n[r]==e)return o.jqxDataTable("deleteRow",t),!1})},deleteByRowNum:function(e){$(this.$el).jqxDataTable("deleteRow",e)},checkById:function(e){var t=this,r=(t.opts,t.getRowById(e));return r?void($.inArray(e,t.checkedIds)>-1||(t.checkedRows.push(r),t.checkedIds.push(e),t.$dispatch("check-change",!0,r))):null},uncheckById:function(e){var t=this,r=t.opts,o=r.id;if($.inArray(e,t.checkedIds)===-1){var n={};return n[o]=e,void t.$dispatch("check-change",!1,n)}$.each(t.checkedRows,function(r,n){if(n[o]==e){var a=t.checkedRows.splice(r,1)[0];return t.checkedIds.splice(r,1),v(t),t.$dispatch("check-change",!1,a),!1}})},clear:function(){var e=$(this.$el);e.jqxDataTable("clear")}},ready:function(){x||"undefined"==typeof Globalize||(x=Globalize.culture("zh-CN"));var e=this,t=e.opts=c(e),r=$(e.$el);t.checkable&&t.columns.unshift(u(e)),t.operations&&t.operations.items&&t.operations.items.length>0&&t.columns.push(p(e));var o=$.extend({},t,{columnsReorder:t.reorder,columnsResize:t.resize,serverProcessing:!0,source:d(e),localization:x,rendered:function(){v(e),r.find(".jqx-grid-cell").each(function(){var e=$(this);e.attr("title",e.text())}),e.$dispatch("rendered")},ready:function(){var o=r,n=o.find("table");if(t.checkable){var a=n.find("div.bh-checkbox"),i=!0;a.each(function(){var e=$(this);if(0===e.find("input[checked]").length)return i=!1,!1});var l=o.find("div.selectAllCheckboxFlag").find("input");i?l.prop("checked",!0).addClass("selectFlag"):l.prop("checked",!1).removeClass("selectFlag"),r.on("click","div.bh-checkbox",function(t){var o=$(t.currentTarget).find("input"),n=o.data("id")+"",a=o[0].checked;h($(this).find("input"),r),a?e.checkById(n):e.uncheckById(n)})}e.selectedRows=b(r),r.on("rowSelect",function(t){e.selectedRows=b(r),e.$dispatch("row-select",e.selectedRows)}),r.on("click",".opt-button",function(){var t=$(this),o=t.attr("data-row"),n=t.attr("data-name"),a=g(r);e.$dispatch(n,a[o],parseInt(o))}),e.$dispatch("ready")}});s.forEach(function(e){delete o[e]}),e.jqxObj=r.jqxDataTable(o)},destory:function(){var e=$(this.$el);e.off("click","div.bh-checkbox"),e.off("rowSelect"),e.off("click",".opt-button"),e.jqxDataTable("destroy")}}},function(e,t,r){e.exports={default:r(34),__esModule:!0}},function(e,t,r){var o=r(35),n=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}},function(e,t){var r=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(e,t){e.exports=" <div class=bh-datatable></div> "},function(e,t){e.exports=' <div class=bh-choose> <div class="side left bh-pull-left" :style="{width: leftWidth}"> <bh-search :show-button=false :value.sync=searchVal :placeholder=placeholder @search=search class=bh-mb-8></bh-search> <div class=left-list> <bh-datatable v-ref:bhchooselefttable :id=id :checkable=true :height=height :checked-rows.sync=checkedRows :show-header=showHeader :url=leftSourceUrl :page-number-field=pageNumberField :page-size-field=pageSizeField selection-mode=default :root=leftSourceAction :columns=columns :query-type=type :query-params=queryParams class=transparentGrid @rendered=leftListRendered @check-change=onCheckChange :callbacks=callbacks> </bh-datatable> </div> </div> <div class="side right bh-pull-left" :style="{width: rightWidth}"> <div class=before></div> <div class=title>{{rightTitle}}</div> <div class=right-list :style=\'{height: height + "px"}\'> <bh-datatable v-ref:bhchooserighttable :id=id :url=rightSourceUrl :localdata=localdata :pageable=false :show-header=showHeader :root=rightSourceAction :columns=rcolumns :query-type=type :query-params=rightParams :operations=operations class=transparentGrid @del=uncheck @rendered=rightListRendered> </bh-datatable> </div> <div class=after></div> </div> </div> '}])});